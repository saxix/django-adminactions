(function(a){a(function(){var b=function(d){return function(){var e=a(this).parent().parent();var f=e.find(d);a(".result input",e).val(a("input.raw-value",f).val());c()}};var c=function(){var d=[];a(".mergetable tr.merge-row").each(function(){var f=a(this).find("td.result");var g=a(this).find("td.origin");var e=a(this).find("td.other");var h=a(this).find("td:first").attr("data-content");a("td",this).removeClass("selected");if(a("input.raw-value",f).val()==a("input.raw-value",g).val()){a(this).find("td.origin").addClass("selected");a("span.display",f).text(a("span.display",g).text())}else{if(a("input.raw-value",f).val()==a("input.raw-value",e).val()){a(this).find("td.other").addClass("selected");a("span.display",f).text(a("span.display",e).text());d.push(h)}else{if(a(".original .display",this).text()!==a(".result .display",this).text()){a(this).addClass("changed")}}}});a("input[name=field_names]").val(d)};a("a.origin").click(b("td.origin"));a("a.other").click(b("td.other"));a("a.swap").click(function(){var f=[];var d=[];var g=a('input[name="master_pk"]');var e=a('input[name="other_pk"]');a(".column.origin").each(function(){f.push([a("input.raw-value",this).val(),a(".display",this).text()])});a(".column.other").each(function(){d.push([a("input.raw-value",this).val(),a(".display",this).text()])});f.push(g.val());d.push(e.val());g.val(d.pop());e.val(f.pop());a('span[id="master_pk"]').text(g.val());a('span[id="other_pk"]').text(e.val());a(a(".column.origin").get().reverse()).each(function(){var h=d.pop();a("input.raw-value",this).val(h[0]);a(".display",this).text(h[1])});a(a(".column.other").get().reverse()).each(function(){var h=f.pop();a("input.raw-value",this).val(h[0]);a(".display",this).text(h[1])});c()});c()})})(django.jQuery);